# 登录注册功能使用指南

## 快速开始

### 1. 访问应用
启动开发服务器后，访问 `http://localhost:5173`

### 2. 注册新用户
1. 点击登录页面的"立即注册"按钮
2. 输入邀请码：`vlinker888`
3. 填写邮箱和密码信息
4. 点击"发送注册邮件"
5. 查收邮箱中的确认邮件并点击确认链接

### 3. 登录系统
1. 在登录页面输入邮箱和密码
2. 点击"登录"按钮
3. 登录成功后自动跳转到主页面

## 功能演示

### 邀请码验证
- 邀请码：`vlinker888`
- 只有输入正确邀请码才能进入下一步
- 支持实时验证和错误提示

### 邮箱注册
- 支持标准邮箱格式验证
- 密码至少6位字符
- 自动发送确认邮件

### 登录功能
- 支持邮箱密码登录
- 自动记住登录状态
- 登录失败时显示错误信息

### 路由保护
- 未登录用户自动重定向到登录页面
- 登录成功后跳转到原目标页面
- 支持登出功能

## 测试账号

### 注册测试
1. 使用邀请码：`vlinker888`
2. 使用测试邮箱：`test@example.com`
3. 设置密码：`123456`

### 登录测试
1. 邮箱：`test@example.com`
2. 密码：`123456`

## 常见问题

### Q: 邀请码验证失败怎么办？
A: 确保输入的是 `vlinker888`，注意大小写和拼写。

### Q: 注册邮件没有收到？
A: 检查垃圾邮件文件夹，确认邮箱地址正确。

### Q: 登录失败？
A: 确认邮箱和密码正确，确保已完成邮箱验证。

### Q: 页面无法访问？
A: 确认已登录，或清除浏览器缓存后重试。

## 开发调试

### 查看认证状态
在浏览器控制台中查看：
```javascript
// 检查当前用户
console.log('当前用户:', window.supabase?.auth?.getUser())

// 检查登录状态
console.log('登录状态:', window.supabase?.auth?.getSession())
```

### 清除登录状态
```javascript
// 清除所有认证数据
window.supabase?.auth?.signOut()
```

## 技术细节

### 认证流程
1. 用户输入邀请码
2. 验证邀请码有效性
3. 填写注册信息
4. 发送确认邮件
5. 用户点击邮件链接确认
6. 完成注册并自动登录

### 安全特性
- 邀请码验证防止未授权注册
- 邮箱验证确保用户身份
- 密码加密存储
- 会话管理
- 路由保护

### 状态管理
- 使用 React Context 管理全局状态
- 自动检查登录状态
- 支持用户信息更新
- 提供登出功能

## 扩展功能

### 自定义邀请码
修改 `src/lib/authApi.ts` 中的验证逻辑：
```typescript
const validInviteCode = 'your-custom-code';
```

### 添加更多验证规则
在注册表单中添加更多验证：
```typescript
rules={[
  { required: true, message: '请输入邮箱' },
  { type: 'email', message: '请输入有效邮箱' },
  { min: 6, message: '密码至少6位' },
  { pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/, message: '密码必须包含大小写字母和数字' }
]}
```

### 添加记住登录功能
在登录表单中添加复选框：
```typescript
<Form.Item name="remember" valuePropName="checked">
  <Checkbox>记住登录状态</Checkbox>
</Form.Item>
```

## 部署说明

### 环境变量
确保配置正确的 Supabase 环境变量：
```env
VITE_SUPABASE_URL=your-supabase-url
VITE_SUPABASE_ANON_KEY=your-supabase-anon-key
```

### 邮件配置
在 Supabase 控制台中配置：
1. 邮件模板
2. SMTP 设置
3. 域名验证

### 安全配置
1. 设置允许的域名
2. 配置 CORS 策略
3. 启用安全头
4. 设置会话超时

## 更新日志

### v1.0.0 (2024-01-XX)
- ✅ 实现基础登录功能
- ✅ 实现邀请码验证
- ✅ 实现邮箱注册
- ✅ 实现路由保护
- ✅ 实现用户状态管理
- ✅ 实现登出功能

### 计划功能
- 🔄 添加第三方登录
- 🔄 添加密码重置
- 🔄 添加用户资料管理
- 🔄 添加多语言支持
- 🔄 添加主题切换 